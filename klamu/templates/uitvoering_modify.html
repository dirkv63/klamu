{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "macros.html" as macros with context %}

{% block head %}
{{ super() }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
{% endblock %}

{% block page_content %}
<div class="row">
    <div class="col-md-4">
        <h1>Uitvoering Aanpassen</h1>
       {{ wtf.quick_form(form) }}
    </div>
    <div class="col-md-8">
        {{ macros.cd_content(cd_content_hdr, cd, uitvoeringen) }}
    </div>
</div>
<script>
    function kompositieFunction() {
        var csrftoken = $('meta[name=csrf_token]').attr('content')

        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type)) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken)
                }
            }
        })

        var kid = $('#komponist option:selected').val();
        var kid_dict = {'komponist_id': kid};
        $.ajax({
            // url: '/komponist/selected',
            url: '{{ url_for("main.selected_komponist") }}',
            data: JSON.stringify(kid_dict),
            method: 'POST',
            contentType: 'application/json',
            success: function(options) {
                var kompositie = $('#kompositie');
                kompositie.empty().append(options);
            }
        });
    };
</script>
{% endblock %}